
Perfeito. Abaixo est√° **TUDO convertido em um checklist t√©cnico completo**, estruturado para voc√™ **copiar e colar direto no bloco de notas** e ir marcando item por item.
Nada est√° considerado como feito. O objetivo √© **auditoria total do sistema**, arquivo por arquivo.

---

# ‚úÖ CHECKLIST GERAL DE CORRE√á√ïES ‚Äî SGE DAXCODE

*Status inicial: **0% feito***

---

## üî¥ CR√çTICOS ‚Äî QUEBRAM FLUXO / GERAM ERRO 500 / DADOS INCONSISTENTES

### Rotas e Controllers

* [ ] Verificar rotas que chamam m√©todos inexistentes

  * `routes/web.php`
  * Rotas chamam:

    * `clonarMesAnterior`
    * `excluirMultiplas`
  * M√©todos existem em `FinanceiroDashboardController`
  * Rotas apontam para `DespesaController`
* [ ] Decidir:

  * [ ] Mover m√©todos para `DespesaController`
  * [ ] OU corrigir rotas para `FinanceiroDashboardController`
* [ ] Testar todas as rotas afetadas ap√≥s ajuste

---

### Hist√≥rico de Matr√≠cula (erro grave de insert)

* [ ] Abrir `app/Models/Matricula.php`
* [ ] Localizar m√©todo de desist√™ncia
* [ ] Corrigir campos gravados no hist√≥rico:

  * [ ] Inserir `tipo_evento`
  * [ ] Remover campos inexistentes
* [ ] Ajustar campo:

  * C√≥digo usa `user_id_alteracao`
  * Tabela tem `user_id`
* [ ] Conferir migration:

  * `database/migrations/2025_12_29_220544_create_matricula_historicos_table.php`
* [ ] Garantir compatibilidade model ‚Üî schema
* [ ] Testar desist√™ncia de matr√≠cula

---

### Settings (coluna inexistente)

* [ ] Abrir `SettingController.php`
* [ ] Localizar uso de `logo_path`
* [ ] Conferir migrations:

  * `create_settings_table`
  * `add_basic_fields_to_settings_table`
* [ ] Confirmar nome real da coluna (`logo`)
* [ ] Ajustar controller e model
* [ ] Testar upload e exibi√ß√£o de logo

---

## üü† ALTA PRIORIDADE ‚Äî BUGS DE NEG√ìCIO / DADOS ERRADOS

### Usu√°rio ‚Üí Aluno ‚Üí Matr√≠cula

* [ ] Abrir `UserController.php`
* [ ] Verificar cria√ß√£o de usu√°rio com tipo `aluno`
* [ ] Confirmar se cria:

  * [ ] Registro em `alunos`
  * [ ] Registro em `matriculas`
* [ ] Se n√£o cria matr√≠cula:

  * [ ] Implementar cria√ß√£o autom√°tica
* [ ] Garantir matr√≠cula ativa padr√£o
* [ ] Testar impacto em:

  * Relat√≥rios
  * Boletim
  * Presen√ßa

---

### Troca de Turma (inconsist√™ncia grave)

* [ ] Abrir `TurmaController.php`
* [ ] Localizar l√≥gica de troca de turma
* [ ] Verificar se altera `alunos.turma_id`
* [ ] Confirmar regra do sistema:

  * Filtros usam `matriculas.turma_id`
* [ ] Corrigir:

  * [ ] Atualizar matr√≠cula ativa
  * [ ] N√ÉO alterar `alunos.turma_id` diretamente
* [ ] Testar listagens e filtros

---

### Financeiro ‚Äî agrega√ß√µes erradas

* [ ] Abrir `FinanceiroDashboardController.php`
* [ ] Identificar reutiliza√ß√£o do mesmo `$query`
* [ ] Separar queries por agregado:

  * Total mensal
  * Total por categoria
  * Indicadores
* [ ] Evitar contamina√ß√£o de joins/selects
* [ ] Validar n√∫meros do dashboard

---

### Disciplina ‚Üí Professor (coluna errada)

* [ ] Abrir `DisciplinaController.php`
* [ ] Verificar busca por professor
* [ ] Confirmar:

  * N√£o existe `professores.nome`
* [ ] Ajustar para `users.name`
* [ ] Conferir rela√ß√£o em `Professor.php`
* [ ] Testar autocomplete / busca

---

## üü° M√âDIA PRIORIDADE ‚Äî CONCORR√äNCIA / INTEGRIDADE / MANUTEN√á√ÉO

### Transa√ß√µes (Aluno + Matr√≠cula)

* [ ] Abrir `AlunoController.php`
* [ ] Localizar cria√ß√£o de aluno
* [ ] Envolver cria√ß√£o em:

  * `DB::transaction`
* [ ] Garantir rollback em falha
* [ ] Testar falha proposital

---

### Gera√ß√£o de c√≥digos (concorr√™ncia)

* [ ] Ver gera√ß√£o de:

  * `ALU-`
  * `MAT-`
* [ ] Identificar uso de `ultimo ID`
* [ ] Substituir por:

  * [ ] UUID
  * [ ] Sequence
  * [ ] Lock transacional
* [ ] Testar cria√ß√£o simult√¢nea

---

### Despesa ‚Äî arquivos √≥rf√£os

* [ ] Abrir `DespesaController.php`
* [ ] Ver update de arquivo
* [ ] Confirmar se:

  * Arquivo antigo √© removido
* [ ] Implementar `Storage::delete`
* [ ] Verificar storage por lixo acumulado

---

### Avalia√ß√µes ‚Äî tipo inconsistente

* [ ] Abrir `AvaliacaoController.php`
* [ ] Ver `store`

  * Tipo livre
* [ ] Ver `update`

  * Tipo restrito
* [ ] Padronizar valida√ß√£o
* [ ] Garantir consist√™ncia de dados

---

### Turmas ‚Äî alunos sem matr√≠cula

* [ ] Abrir `TurmaController.php`
* [ ] Ver listagem de alunos dispon√≠veis
* [ ] Confirma se busca apenas por matr√≠cula
* [ ] Avaliar:

  * Alunos rec√©m-criados sem matr√≠cula
* [ ] Ajustar regra ou fluxo

---

## üîµ BAIXA / REFATORA√á√ÉO / DUPLICA√á√ïES

### Model Aluno ‚Äî rela√ß√µes duplicadas

* [ ] Abrir `Aluno.php`
* [ ] Localizar:

  * `documents()`
  * `documentos()`
* [ ] Escolher UM padr√£o
* [ ] Remover duplicado
* [ ] Atualizar chamadas no sistema

---

### Respons√°vel ‚Äî rela√ß√£o obsoleta

* [ ] Abrir `Responsavel.php`
* [ ] Ver rela√ß√£o `usuario()`
* [ ] Confirmar coluna atual (`user_id`)
* [ ] Atualizar rela√ß√£o
* [ ] Verificar migrations de update

---

### Controllers duplicados

* [ ] Comparar:

  * `DashboardFinanceiroController`
  * `FinanceiroDashboardController`
* [ ] Decidir:

  * [ ] Unificar
  * [ ] Remover c√≥digo morto
* [ ] Ajustar rotas se necess√°rio

---

### Encoding / UX

* [ ] Procurar textos quebrados:

  * ‚Äún√Üo‚Äù
  * ‚Äúmatr¬°cula‚Äù
* [ ] Arquivos:

  * `MatriculaStatusController.php`
  * `BoletimController.php`
* [ ] Ajustar encoding para UTF-8
* [ ] Padronizar mensagens

---

### UserProfileService ‚Äî fallback errado

* [ ] Abrir `UserProfileService.php`
* [ ] Corrigir preced√™ncia do `??`
* [ ] Evitar notice / nome vazio
* [ ] Testar usu√°rios sem perfil

---

## üß± DUPLICIDADES DE L√ìGICA (REFATORA√á√ÉO)

### Filtros nome/email

* [ ] AlunoController
* [ ] ProfessorController
* [ ] ResponsavelController
* [ ] Extrair para:

  * scope
  * trait
  * helper

---

### Upload de foto de perfil

* [ ] AlunoController
* [ ] ProfessorController
* [ ] Criar service √∫nico:

  * upload
  * update
  * delete

---

### C√°lculo de m√©dias / boletim

* [ ] BoletimController
* [ ] Centralizar l√≥gica em service
* [ ] Usar tanto por aluno quanto por turma

---

## üóÉÔ∏è MIGRATIONS / SCHEMA

* [ ] Migration ‚Äúadd_tipo‚Äù cria tabela inteira

  * Renomear ou refazer
* [ ] Migration sem `down` correto

  * Implementar rollback
* [ ] Testar rollback geral do projeto

---

## üìÇ ARQUIVOS-CHAVE PARA AUDITORIA

* [ ] `routes/web.php`
* [ ] `Matricula.php`
* [ ] `Aluno.php`
* [ ] `UserController.php`
* [ ] `AlunoController.php`
* [ ] `TurmaController.php`
* [ ] `FinanceiroDashboardController.php`
* [ ] `DespesaController.php`
* [ ] `SettingController.php`
* [ ] `DisciplinaController.php`
* [ ] `Professor.php`
* [ ] `Responsavel.php`
* [ ] `UserProfileService.php`
* [ ] Todas migrations citadas

---

Se quiser, no pr√≥ximo passo posso:

* Quebrar isso em **sprints**
* Priorizar por **ordem segura de corre√ß√£o**
* Ou transformar em **Kanban (Backlog / Doing / Done)** pronto para Trello / Notion / GitHub Projects




 ver dps os relat√≥rios 
ver dps os certificados
arquivos

Autoriza√ß√£o de Uso de Imagem e Voz Maior Timbrado DAX CAEC.docx
Autoriza√ß√£o de Uso de Imagem e Voz Menor Timbrado DAX CAEC.docx
Declara√ß√£o de Resid√™ncia Maior Timbrado DAX CAEC.docx
Declara√ß√£o de Resid√™ncia Menor Timbrado DAX CAEC.docx
Ficha de Inscri√ß√£o Timbrado DAX CAEC.docx
Ficha de Matricula Timbrado DAX CAEC vers√£o 16 dez.docx
Inscri√ß√µes DAX Code - 2025-08-12.xlsx
LISTA ALUNOS.xlsx
mat.xlsx
TERMO DE RESPONSABILIDADE E COMPROMISSO DO PARTICIPANTE 07.01.25.docx
